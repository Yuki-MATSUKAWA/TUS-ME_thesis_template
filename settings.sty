%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%
%%%               settings.sty
%%%            学位論文設定ファイル
%%%
%%%               v1.0.0 Yuki MATSUKAWA 27 Dec. 2023
%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% テキストエリア指定 %%%
%%% A4 paper:297 mm x 210 mm %%%
% \setlength{\hoffset}{-2truept}
% \setlength{\voffset}{-15truept}
% \setlength{\oddsidemargin}{0truept}
% \setlength{\evensidemargin}{0truept}
% \setlength{\topmargin}{0truept}
% \setlength{\footskip}{0truept}
% \setlength{\textheight}{743truept}
% \setlength{\textwidth}{493truept}
% \setlength{\headsep}{0truept}
% \setlength{\headheight}{0truept}
% \setlength{\marginparsep}{0truept}
% \setlength{\marginparwidth}{0truept}

%%% Packages %%%
% 図の挿入
\usepackage{graphicx}
% % 数式等
% \usepackage{physics}
% \usepackage{amsmath,amssymb}
% \usepackage{bm}
% % otf
% \usepackage[deluxe]{otf}
% % フォントを Times に変更
% \usepackage{newtxtext,newtxmath}
% % 図の出力位置を H で指定
% \usepackage{float}
% % 関連する図を並べる際に使用
% \usepackage{subfigure}
% % natbib
% \usepackage{natbib}
% % 参考文献リストの見出しを「参考文献」から「文献」に変更
% \renewcommand{\refname}{文献}

%%% 表示の変更 %%%
% \newcommand{\etal}{et al.\ }
% \def\Gr{\mathit{Gr}}
% \def\Ma{\mathit{Ma}}
% \def\Nu{\mathit{Nu}}
% \def\Pe{\mathit{Pe}}
% \def\Pr{\mathit{Pr}}
% \def\Re{\mathit{Re}}
% \def\Ra{\mathit{Ra}}
% \def\Sc{\mathit{Sc}}
% \def\St{\mathit{St}}
% \def\Ta{\mathit{Ta}}
% \def\Wi{\mathit{Wi}}

% \renewcommand{\figurename}{Fig.~}
% \renewcommand{\tablename}{Table~}
% \newcommand{\eref}[1]{式~(\ref{#1})}
% \newcommand{\Eref}[1]{Equation~(\ref{#1})}
% \newcommand{\sref}[1]{\ref{#1}~節}
% \newcommand{\fref}[1]{図~\ref{#1}}
% \newcommand{\Fref}[1]{Fig.~\ref{#1}}
% \newcommand{\tref}[1]{表~\ref{#1}}
% \newcommand{\Tref}[1]{Table~\ref{#1}}




%%% \author 等の再定義 %%%
\def\thesis#1{\gdef\@thesis{#1}}
\def\title#1{\gdef\@title{#1}}
\def\date#1{\gdef\@date{#1}}
\def\author#1{\gdef\@author{#1}}
\def\coworker#1{\gdef\@coworker{#1}}
\def\supervisor#1{\gdef\@supervisor{#1}}
\def\cosupervisor#1{\gdef\@cosupervisor{#1}}
\def\affiliation#1{\gdef\@affiliation{#1}}
\def\laboratory#1{\gdef\@laboratory{#1}}
\gdef\@date{\today}          %Default is today's date

%%% 表紙の定義 \makecover %%%
\newcommand\makecover{
  \thispagestyle{empty}
  \vspace*{35mm}
  \begin{center}
    {\large \@thesis}
    \\\vspace{12mm}
    {\Large \@title}
    \\\vspace{60mm}
    {\large \@date}
    \\\vspace{12mm}
    {\large \@affiliation}
    \\\vspace{6mm}
    {\large \@laboratory}
    \\\vspace{18mm}
    {\large \@author}
  \end{center}
  \newpage
  \thispagestyle{empty}
}


%%% ページスタイル（柱・ノンブル）の設定 %%%
% 通常の本文ページスタイル
% 柱とノンブルをそれぞれページ上部の左右に表示
% ページ下部は何も表示しない
\NewPageStyle{normal}{
  running_head_position=top-left,   % 柱の位置
  nombre_position=top-right,        % ノンブルの位置
  mark_format={_chapter=%
    \ifx\empty\thechapter\empty%
      \underline{{\rule[-2mm]{0mm}{14pt}\hbox to 0.8\columnwidth{\bfseries #1 \hfill}}}%
    \else%
      \underline{{\rule[-2mm]{0mm}{14pt}\hbox to 0.8\columnwidth{\bfseries 第\thechapter 章 \quad #1 \hfill}}}%
    \fi%
  }, % 柱の内容
  nombre={%
    \underline{\rule[-2mm]{0mm}{14pt}\hbox to 0.2\columnwidth{\bfseries \hfill \thepage}}
  }, % ノンブルの内容
  odd_running_head=_chapter,        % 奇数ページの柱
  even_running_head=_chapter        % 偶数ページの柱
}
\pagestyle{normal}  % 本文全体へ設定を適用

% 章の最初のページスタイル
% 柱は表示しない
% ノンブルをページ下部中央に表示
\NewPageStyle{chapterfirstpage}{
  nombre_position=bottom-center     % ノンブルの位置
}

% 謝辞用ページスタイル
\NewPageStyle{acknowledge}{
  running_head_position=top-left,   % 柱の位置
  nombre_position=top-right,        % ノンブルの位置
  % mark_format={_chapter=%
  %   \underline{{\rule[-2mm]{0mm}{14pt}\hbox to 0.8\columnwidth{\bfseries #1 \hfill}}}%
  % }, % 柱の内容
  nombre={%
    \underline{\rule[-2mm]{0mm}{14pt}\hbox to 0.2\columnwidth{\bfseries \hfill \thepage}}
  }, % ノンブルの内容
  odd_running_head=_chapter,        % 奇数ページの柱
  even_running_head=_chapter        % 偶数ページの柱
}
% 謝辞の定義 \acknowledge
\newcommand\acknowledge{%
  \newpage
  \chapter*{謝辞}
  \markboth{%
  \underline{{\rule[-2mm]{0mm}{14pt}\hbox to 0.8\columnwidth{\bfseries 謝辞 \hfill}}}}%
  {\underline{{\rule[-2mm]{0mm}{14pt}\hbox to 0.8\columnwidth{\bfseries 謝辞 \hfill}}}}
  \pagestyle{acknowledge}
  \addcontentsline{toc}{chapter}{謝辞}
}

% 付録用ページスタイル
\NewPageStyle{appendix}{
  running_head_position=top-left,   % 柱の位置
  nombre_position=top-right,        % ノンブルの位置
  mark_format={_chapter=%
    \underline{{\rule[-2mm]{0mm}{14pt}\hbox to 0.8\columnwidth{\bfseries 付録\thechapter \quad #1 \hfill}}}%
  }, % 柱の内容
  nombre={%
    \underline{\rule[-2mm]{0mm}{14pt}\hbox to 0.2\columnwidth{\bfseries \hfill \thepage}}
  }, % ノンブルの内容
  odd_running_head=_chapter,        % 奇数ページの柱
  even_running_head=_chapter        % 偶数ページの柱
}

%%% 章の見出しを改行，空行後に表示 %%%
\ModifyHeading{chapter}{%
  label_format={第\thechapter 章},
  font={\huge\bfseries},
  format={%
    \ifx\empty#1\empty%
      \noindent#2%
      \vskip2\Cvs
    \else%
      \vskip2\Cvs\noindent#1%
      \vskip1\zw\noindent#2%
      \vskip3\Cvs
    \fi%
  },
  pagestyle={chapterfirstpage}
}
